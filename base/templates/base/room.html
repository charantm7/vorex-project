{% extends 'base.html' %} {% load static %}{% block title %}
<title>Room</title>
{% endblock %} {% block nav1 %}
<a href="#">/ {{rooms.name}}</a>
{% endblock %} {% block link %}
<!-- <link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
  crossorigin="anonymous"
/> -->
<link rel="stylesheet" href="{% static 'css/room.css' %}" />
{% endblock %} {% block content %}
<div class="rooms">
  <div class="tab">
    <button class="tablinks" onclick="openTab(event, 'Info')" id="defaultOpen">
      <i class="fas fa-tachometer-alt"></i><span class="btn-txt">Dashboard</span>
    </button>
    <button class="tablinks" onclick="openTab(event, 'Group')">
      <i class="fa-solid fa-user-group"></i><span class="btn-txt">Group</span>
    </button>
    <button class="tablinks" onclick="openTab(event, 'Materials')">
      <i class="fa-solid fa-book"></i><span class="btn-txt">Study Materials</span>
    </button>
  </div>
  <div id="Info" class="tabcontent">
    <div class="tabcontent-top">
      <div class="tabcontent-top-left">
        <i class="fa-solid fa-calculator"></i>
        <div class="tabcontent-top-left-1">
          <p>{{rooms.name}}</p>
          <small>{{rooms.description}}</small>
          <small>Created on: {{rooms.created_at|date:"Y F j"}}</small>
        </div>
      </div>
      <div class="tabcontent-top-right">
        <p>Created by:</p>
        <div class="tabcontent-top-right-1">
          <img src="{{profile.profile_pic.url}}" alt="img" />
          <a href="{% url 'Profile' rooms.created_by.username %}">@{{rooms.created_by.username}}</a>
        </div>
        <p>Squad stats: {{members}} Joined</p>
      </div>
    </div>
  </div>

  <div id="Group" class="tabcontent">
    <div class="members">
      <div class="top">
        <div class="top-1">
          <p>Chat</p>
          <i class="fa-solid fa-plus" id="tooltip"><span class="tooltiptext">Chat with individual</span></i>
        </div>
        <div class="top-2">
          <input type="text" placeholder="Search" />
          <i class="fas fa-search"></i>
        </div>
      </div>
      <div class="bottom">
        {% for members in members_joined %}
        <div class="members-chat">
          <div class="left">
            {% if members.profile.profile_pic %}
            <img src="{{ members.profile.profile_pic.url}}" alt="img" />
            {% endif %}
          </div>
          <div class="mid"><p>{{members.username}}</p></div>
          <div class="right">
            <i class="fas fa-ellipsis-v" id="tooltip"><span class="tooltiptext">more</span></i>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="chat-area">
      <div class="chat-area-top">
        <div class="chat-area-top-left">
          <p>Group Chat</p>
        </div>
        <div class="chat-area-top-right">
          <i class="fas fa-ellipsis-v" id="tooltip"><span class="tooltiptext">more</span></i>
        </div>
      </div>
      <div class="chat-area-mid">lorem*20</div>
      <div class="chat-area-bottom">
        <div class="chat-area-bottom-item">
          <input type="text" placeholder="Type a message" />
          <i class="fas fa-paper-plane"></i>
        </div>
      </div>
    </div>
  </div>
  {% block materials %}
  <div id="Materials" class="tabcontent">
    <div class="materials-top">
      <div class="materials-top-left">
        <div class="materials-top-left-folder" id="tooltip" onclick="CreateFolder()">
          <i class="fa-solid fa-plus"></i>
          <p>New Folder</p>
          <span class="tooltiptext">Add Folder</span>
        </div>
        <div class="materials-top-left-code" title="Upload Your Code">
          <i class="fa-solid fa-plus"></i>
          <p>Code</p>
        </div>
      </div>

      <div class="materials-top-mid">
        <input type="text" placeholder="Search Notes" />
        <i class="fas fa-search"></i>
      </div>
    </div>

    <div class="create-folder">
      <div class="create-folder-top">
        <p>Create Folder</p>
        <i class="fas fa-times" onclick="closeFolder()"></i>
      </div>
      <div class="create-folder-bottom">
        <form action="{% url 'Create-folder' rooms.name %}" method="POST">
          {% csrf_token %}
          <div class="input-folder-name">
            <label for="folder-name">Name</label>
            {{form.name}}
          </div>
          <button type="submit">Create</button>
        </form>
      </div>
    </div>

    <div class="materials-bottom">
      <div class="row g-3">
        {% for folder in folders %}
        <div class="delete">
          <div class="top">
            <p>Delete This Folder?</p>
          </div>
          <div class="bottom">
            <button class="cancel-btn" onclick="CancelDelete()">Cancel</button>
            <a href="{% url 'Delete-folder' rooms.name folder.name %}"
              ><button class="delete-btn" onclick="DeleteFolder()">Delete</button>
            </a>
          </div>
        </div>
        <div class="col-6 col-sm-4 col-md-3 col-lg-2">
          <div class="card">
            <div class="card-top">
              <i class="fa-solid fa-folder-open"></i>
              <a href="{% url 'Folder' folder.name %}" title="{{folder.name}}">{{ folder.name }}</a>
            </div>
            <div class="card-bottom">
              <p>By: {{ folder.created_by.username|default:'Unknown' }}</p>
              {% if request.user == folder.created_by %}
              <a onclick="DeleteFolder()"><i class="fa-solid fa-trash"> </i></a>

              {% endif %}
            </div>
          </div>
        </div>
        {% empty %}
        <div class="col-12 text-center">
          <p>No folders available.</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>

  {% endblock %}
</div>
<script src="{% static 'js/room.js'%}"></script>
<script>
  function CreateFolder() {
    document.querySelector(".create-folder").style.display = "block";
  }
  function closeFolder() {
    document.querySelector(".create-folder").style.display = "none";
  }
  function CancelDelete() {
    document.querySelector(".delete").style.display = "none";
  }
  function DeleteFolder() {
    document.querySelector(".delete").style.display = "flex";
  }
</script>
{% endblock %}
<!-- <i class="fa-solid fa-file-pdf"></i> -->
{% url 'Delete-folder' rooms.name folder.name %}
